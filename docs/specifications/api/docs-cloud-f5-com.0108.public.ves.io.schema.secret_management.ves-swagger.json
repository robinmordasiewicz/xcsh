{"openapi":"3.0.0","info":{"title":"F5 Distributed Cloud Services API for ves.io.schema.secret_management","description":"F5XC Secret Management service serves APIs for information required for offline secret encryption such as getting the public key and getting the secret policy document.","version":""},"paths":{"/api/secret_management/get_public_key":{"get":{"summary":"Public Key","description":"GetPublicKey API returns public part of the volterra secret management key that needs to be given to volterra secret management tool to do secret encryption.","operationId":"ves.io.schema.secret_management.CustomAPI.GetPublicKey","responses":{"200":{"description":"A successful response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/secret_managementGetPublicKeyResponse"}}}},"401":{"description":"Returned when operation is not authorized","content":{"application/json":{"schema":{"format":"string"}}}},"403":{"description":"Returned when there is no permission to access resource","content":{"application/json":{"schema":{"format":"string"}}}},"404":{"description":"Returned when resource is not found","content":{"application/json":{"schema":{"format":"string"}}}},"409":{"description":"Returned when operation on resource is conflicting with current value","content":{"application/json":{"schema":{"format":"string"}}}},"429":{"description":"Returned when operation has been rejected as it is happening too frequently","content":{"application/json":{"schema":{"format":"string"}}}},"500":{"description":"Returned when server encountered an error in processing API","content":{"application/json":{"schema":{"format":"string"}}}},"503":{"description":"Returned when service is unavailable temporarily","content":{"application/json":{"schema":{"format":"string"}}}},"504":{"description":"Returned when server timed out processing request","content":{"application/json":{"schema":{"format":"string"}}}}},"parameters":[{"name":"key_version","description":"x-example: \"0\"\nThe version of public key","in":"query","required":false,"x-displayname":"Key Version","schema":{"type":"integer","format":"int64"}}],"externalDocs":{"description":"Examples of this operation","url":"https://docs.cloud.f5.com/docs-v2/platform/reference/api-ref/ves-io-schema-secret_management-customapi-getpublickey"},"x-ves-proto-rpc":"ves.io.schema.secret_management.CustomAPI.GetPublicKey"},"x-displayname":"F5XC Secret Management","x-ves-proto-service":"ves.io.schema.secret_management.CustomAPI","x-ves-proto-service-type":"CUSTOM_PUBLIC"},"/api/secret_management/namespaces/{namespace}/secret_policys/{name}/get_policy_document":{"get":{"summary":"Policy Document","description":"GetPolicyDocument API returns secret policy document for the given policy that contains information about all the rules in the policy and policy_id.\nThis document can be given to volterra secret management tool to do secret encryption.","operationId":"ves.io.schema.secret_management.CustomAPI.GetPolicyDocument","responses":{"200":{"description":"A successful response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/secret_managementGetPolicyDocumentResponse"}}}},"401":{"description":"Returned when operation is not authorized","content":{"application/json":{"schema":{"format":"string"}}}},"403":{"description":"Returned when there is no permission to access resource","content":{"application/json":{"schema":{"format":"string"}}}},"404":{"description":"Returned when resource is not found","content":{"application/json":{"schema":{"format":"string"}}}},"409":{"description":"Returned when operation on resource is conflicting with current value","content":{"application/json":{"schema":{"format":"string"}}}},"429":{"description":"Returned when operation has been rejected as it is happening too frequently","content":{"application/json":{"schema":{"format":"string"}}}},"500":{"description":"Returned when server encountered an error in processing API","content":{"application/json":{"schema":{"format":"string"}}}},"503":{"description":"Returned when service is unavailable temporarily","content":{"application/json":{"schema":{"format":"string"}}}},"504":{"description":"Returned when server timed out processing request","content":{"application/json":{"schema":{"format":"string"}}}}},"parameters":[{"name":"namespace","description":"namespace\n\nx-required\nx-example: \"system\"\nNamespace of the secret policy","in":"path","required":true,"x-displayname":"Namespace","schema":{"type":"string"}},{"name":"name","description":"name\n\nx-required\nx-example: \"site-secret-policy\"\nName of the secret policy","in":"path","required":true,"x-displayname":"Name","schema":{"type":"string"}}],"externalDocs":{"description":"Examples of this operation","url":"https://docs.cloud.f5.com/docs-v2/platform/reference/api-ref/ves-io-schema-secret_management-customapi-getpolicydocument"},"x-ves-proto-rpc":"ves.io.schema.secret_management.CustomAPI.GetPolicyDocument"},"x-displayname":"F5XC Secret Management","x-ves-proto-service":"ves.io.schema.secret_management.CustomAPI","x-ves-proto-service-type":"CUSTOM_PUBLIC"}},"x-displayname":"F5XC Secret Management","x-ves-proto-package":"ves.io.schema.secret_management","components":{"schemas":{"policyMatcherType":{"type":"object","description":"A matcher specifies multiple criteria for matching an input string. The match is considered successful if any of the criteria are satisfied. The set\nof supported match criteria includes a list of exact values and a list of regular expressions.","title":"MatcherType","x-displayname":"Matcher","x-ves-proto-message":"ves.io.schema.policy.MatcherType","properties":{"exact_values":{"type":"array","description":" A list of exact values to match the input against.\n\nExample: ` \"['new york', 'london', 'sydney', 'tokyo', 'cairo']\"`\n\nValidation Rules:\n  ves.io.schema.rules.repeated.items.string.max_bytes: 256\n  ves.io.schema.rules.repeated.items.string.not_empty: true\n  ves.io.schema.rules.repeated.max_items: 64\n  ves.io.schema.rules.repeated.unique: true\n","title":"exact values","maxItems":64,"items":{"type":"string","maxLength":256},"x-displayname":"Exact Values","x-ves-example":"['new york', 'london', 'sydney', 'tokyo', 'cairo']","x-ves-validation-rules":{"ves.io.schema.rules.repeated.items.string.max_bytes":"256","ves.io.schema.rules.repeated.items.string.not_empty":"true","ves.io.schema.rules.repeated.max_items":"64","ves.io.schema.rules.repeated.unique":"true"}},"regex_values":{"type":"array","description":" A list of regular expressions to match the input against.\n\nExample: ` \"['^new .*$', 'san f.*', '.* del .*']\"`\n\nValidation Rules:\n  ves.io.schema.rules.repeated.items.string.max_bytes: 256\n  ves.io.schema.rules.repeated.items.string.not_empty: true\n  ves.io.schema.rules.repeated.items.string.regex: true\n  ves.io.schema.rules.repeated.max_items: 16\n  ves.io.schema.rules.repeated.unique: true\n","title":"regex values","maxItems":16,"items":{"type":"string","maxLength":256},"x-displayname":"Regex Values","x-ves-example":"['^new .*$', 'san f.*', '.* del .*']","x-ves-validation-rules":{"ves.io.schema.rules.repeated.items.string.max_bytes":"256","ves.io.schema.rules.repeated.items.string.not_empty":"true","ves.io.schema.rules.repeated.items.string.regex":"true","ves.io.schema.rules.repeated.max_items":"16","ves.io.schema.rules.repeated.unique":"true"}},"transformers":{"type":"array","description":" An ordered list of transformers (starting from index 0) to be applied to the path before matching.\n\nExample: ` \"[BASE64_DECODE, LOWER_CASE]`\n\nValidation Rules:\n  ves.io.schema.rules.repeated.max_items: 9\n  ves.io.schema.rules.repeated.unique: true\n","title":"transformers","maxItems":9,"items":{"$ref":"#/components/schemas/policyTransformer"},"x-displayname":"Transformers","x-ves-validation-rules":{"ves.io.schema.rules.repeated.max_items":"9","ves.io.schema.rules.repeated.unique":"true"}}}},"policyRuleAction":{"type":"string","description":"The rule action determines the disposition of the input request API. If a policy matches a rule with an ALLOW action, the processing of the request proceeds\nforward. If it matches a rule with a DENY action, the processing of the request is terminated and an appropriate message/code returned to the originator. If\nit matches a rule with a NEXT_POLICY_SET action, evaluation of the current policy set terminates and evaluation of the next policy set in the chain begins.\n\n - DENY: DENY\n\nDeny the request.\n - ALLOW: ALLOW\n\nAllow the request to proceed.\n - NEXT_POLICY_SET: NEXT_POLICY_SET\n\nTerminate evaluation of the current policy set and begin evaluating the next policy set in the chain. Note that the evaluation of any remaining policies\nin the current policy set is skipped.\n - NEXT_POLICY: NEXT_POLICY\n\nTerminate evaluation of the current policy and begin evaluating the next policy in the policy set. Note that the evaluation of any remaining rules in the\ncurrent policy is skipped.\n - LAST_POLICY: LAST_POLICY\n\nTerminate evaluation of the current policy and begin evaluating the last policy in the policy set. Note that the evaluation of any remaining rules in the\ncurrent policy is skipped.\n - GOTO_POLICY: GOTO_POLICY\n\nTerminate evaluation of the current policy and begin evaluating a specific policy in the policy set. The policy is specified using the goto_policy field in\nthe rule and must be after the current policy in the policy set.","title":"Rule Action","enum":["DENY","ALLOW","NEXT_POLICY"],"default":"DENY","x-displayname":"Rule Action","x-ves-proto-enum":"ves.io.schema.policy.RuleAction"},"policyRuleCombiningAlgorithm":{"type":"string","description":"The rule combining algorithm for a policy determines how the list of rules in the policy is evaluated.\nIf any of the rules is configured with a App Firewall action, the rule combining algorithm must be configured to be FIRST_MATCH.\n\n- FIRST_MATCH Rules are evaluated sequentially till a matching rule is identified\n- ALLOW_OVERRIDES Rules with an ALLOW action are evaluated prior to rules with a DENY action\n- DENY_OVERRIDES Rules with a DENY action are evaluated prior to rules with an ALLOW action\n\n - FIRST_MATCH: First Match\n\nRules are evaluated sequentially till a matching rule is identified\n - DENY_OVERRIDES: Deny Overrides\n\nRules with a DENY action are evaluated prior to rules with an ALLOW action\n - ALLOW_OVERRIDES: Allow Overrides\n\nRules with an ALLOW action are evaluated prior to rules with a DENY action","title":"RuleCombiningAlgorithm","enum":["FIRST_MATCH","DENY_OVERRIDES","ALLOW_OVERRIDES"],"default":"FIRST_MATCH","x-displayname":"Rule Combining Algorithm","x-ves-proto-enum":"ves.io.schema.policy.RuleCombiningAlgorithm"},"policyTransformer":{"type":"string","description":"Transformers to be applied on the part of the request before matching.\n\n - TRANSFORMER_NONE: transformer none\n\nNo transformers enabled\n - LOWER_CASE: lower case\n\nConvert string to lower case\n - UPPER_CASE: upper case\n\nConvert string to upper case\n - BASE64_DECODE: base64 decode\n\nDecode string assuming base64 encoding\n - NORMALIZE_PATH: normalize path\n\nNormalize URL path so that /a/b/../c will be transformed to /a/c\n - REMOVE_WHITESPACE: remove whitespace\n\nRemove whitespaces\n - URL_DECODE: URL decode\n\nDecode string assuming URL encoding as per rfc1738\n - TRIM_LEFT: trim left\n\nRemove whitespace from the left side of the input string\n - TRIM_RIGHT: trim right\n\nRemove whitespace from the right side of the input string\n - TRIM: trim\n\nRemove whitespace from the both sides of the input string","title":"Transformer","enum":["LOWER_CASE","UPPER_CASE","BASE64_DECODE","NORMALIZE_PATH","REMOVE_WHITESPACE","URL_DECODE","TRIM_LEFT","TRIM_RIGHT","TRIM"],"default":"TRANSFORMER_NONE","x-displayname":"Transformer","x-ves-proto-enum":"ves.io.schema.policy.Transformer"},"schemaLabelMatcherType":{"type":"object","description":"x-displayName: \"Label Matcher\"\nA label matcher specifies a list of label keys whose values need to match for\nsource/client and destination/server. Note that the actual label values are not\nspecified and do not matter. This allows an ability to scope grouping by the\nlabel key name.","title":"LabelMatcherType","properties":{"keys":{"type":"array","description":"x-displayName: \"Keys\"\nx-example: \"['environment', 'location', 'deployment']\"\nThe list of label key names that have to match","title":"keys","items":{"type":"string"}}}},"schemaLabelSelectorType":{"type":"object","description":"This type can be used to establish a 'selector reference' from one object(called selector) to\na set of other objects(called selectees) based on the value of expresssions.\nA label selector is a label query over a set of resources. An empty label selector matches all objects.\nA null label selector matches no objects. Label selector is immutable.\nexpressions is a list of strings of label selection expression.\nEach string has \",\" separated values which are \"AND\" and all strings are logically \"OR\".\nBNF for expression string\n<selector-syntax>         ::= <requirement> | <requirement> \",\" <selector-syntax>\n<requirement>             ::= [!] KEY [ <set-based-restriction> | <exact-match-restriction> ]\n<set-based-restriction>   ::= \"\" | <inclusion-exclusion> <value-set>\n<inclusion-exclusion>     ::= <inclusion> | <exclusion>\n<exclusion>               ::= \"notin\"\n<inclusion>               ::= \"in\"\n<value-set>               ::= \"(\" <values> \")\"\n<values>                  ::= VALUE | VALUE \",\" <values>\n<exact-match-restriction> ::= [\"=\"|\"==\"|\"!=\"] VALUE","title":"LabelSelectorType","x-displayname":"Label Selector","x-ves-proto-message":"ves.io.schema.LabelSelectorType","properties":{"expressions":{"type":"array","description":" expressions contains the kubernetes style label expression for selections.\n\nExample: ` \"region in (us-west1, us-west2),tier in (staging)\"`\n\nRequired: YES\n\nValidation Rules:\n  ves.io.schema.rules.message.required: true\n  ves.io.schema.rules.repeated.items.string.k8s_label_selector: true\n  ves.io.schema.rules.repeated.items.string.max_len: 4096\n  ves.io.schema.rules.repeated.items.string.min_len: 1\n  ves.io.schema.rules.repeated.max_items: 1\n","title":"expressions","maxItems":1,"items":{"type":"string","minLength":1,"maxLength":4096},"x-displayname":"Selector Expression","x-ves-example":"region in (us-west1, us-west2),tier in (staging)","x-ves-required":"true","x-ves-validation-rules":{"ves.io.schema.rules.message.required":"true","ves.io.schema.rules.repeated.items.string.k8s_label_selector":"true","ves.io.schema.rules.repeated.items.string.max_len":"4096","ves.io.schema.rules.repeated.items.string.min_len":"1","ves.io.schema.rules.repeated.max_items":"1"}}}},"schemasecret_policy_ruleGlobalSpecType":{"type":"object","description":"A secret_policy_rule object consists of an unordered list of predicates and an action.\nThe predicates are evaluated against a set of input fields that are extracted from client certificate.\nA rule is considered to match if all predicates in the rule evaluate to true for that request.\nAny predicates that are not specified in a rule are implicitly considered to be true.\nIf a rule is matched, the action specified for the rule is enforced for that request.\n\nA secret_policy_rule can be part of exactly one secret_policy and must belong to the same namespace as the secret policy.","title":"Secret Policy Rule Specifications","x-displayname":"Global Specifications","x-ves-oneof-field-client_choice":"[\"client_name\",\"client_name_matcher\",\"client_selector\"]","x-ves-proto-message":"ves.io.schema.secret_policy_rule.GlobalSpecType","properties":{"action":{"$ref":"#/components/schemas/policyRuleAction"},"client_name":{"type":"string","description":"Exclusive with [client_name_matcher client_selector]\n The name of the client trying to access the secret. Name of the client will be extracted from client TLS certificate.\n This predicate evaluates to true if client name matches the configured name\n\nExample: ` \"ver.re01.int.ves.io\"`\n\nValidation Rules:\n  ves.io.schema.rules.string.max_bytes: 256\n","title":"client name","maxLength":256,"x-displayname":"Client Name","x-ves-example":"ver.re01.int.ves.io","x-ves-validation-rules":{"ves.io.schema.rules.string.max_bytes":"256"}},"client_name_matcher":{"$ref":"#/components/schemas/policyMatcherType"},"client_selector":{"$ref":"#/components/schemas/schemaLabelSelectorType"}}},"secret_managementGetPolicyDocumentResponse":{"type":"object","description":"Policy Document contains the information about the secret policy and all the secret policy rules for the policy.\nThis document can be given to volterra secret management tool to do secret encryption.","title":"GetPolicyDocumentResponse","x-displayname":"Policy Document","x-ves-proto-message":"ves.io.schema.secret_management.GetPolicyDocumentResponse","properties":{"data":{"$ref":"#/components/schemas/secret_managementPolicyData"}}},"secret_managementGetPublicKeyResponse":{"type":"object","description":"F5XC Secret Management uses asymmetric cryptography for securing secrets.\nEach tenant will be assigned a <public,private> keypair for secret management at registration time.\nWhile private part of the key never leaves volterra secret management, public part of this asymmetric key is used for secret encryption.\nget_public_key_response is the response to the get_public_key API and holds the public key for secret encryption.","title":"GetPublicKeyResponse","x-displayname":"Public Key","x-ves-proto-message":"ves.io.schema.secret_management.GetPublicKeyResponse","properties":{"data":{"$ref":"#/components/schemas/secret_managementKeyData"}}},"secret_managementKeyData":{"type":"object","description":"F5XC Secret Management uses asymmetric cryptography for securing secrets.\nEach tenant will be assigned a <public,private> keypair for secret management at registration time.\nWhile private part of the key never leaves volterra secret management, public part of this asymmetric key is used for secret encryption.\nkey_data holds the public key for secret encryption.","title":"KeyData","x-displayname":"Public Key","x-ves-proto-message":"ves.io.schema.secret_management.KeyData","properties":{"key_version":{"type":"integer","description":"\n\nExample: ` \"1\"`","title":"key_version","format":"int64","x-displayname":"Version of the key","x-ves-example":"1"},"modulus_base64":{"type":"string","description":" Modulus as Base64 encoded string\n\nExample: ` \"value\"`","title":"modulus_base64","x-displayname":"Modulus","x-ves-example":"value"},"public_exponent_base64":{"type":"string","description":" Public Exponent as Base64 encoded string\n\nExample: ` \"value\"`","title":"public_exponent_base64","x-displayname":"Public Exponent","x-ves-example":"value"},"tenant":{"type":"string","description":" Tenant of the public key\n\nExample: ` \"ves-io\"`","title":"tenant","x-displayname":"Tenant","x-ves-example":"ves-io"}}},"secret_managementPolicyData":{"type":"object","description":"policy_data contains the information about the secret policy and all the secret policy rules for the policy.","title":"PolicyData","x-displayname":"Policy Data","x-ves-proto-message":"ves.io.schema.secret_management.PolicyData","properties":{"name":{"type":"string","description":" Name of the policy\n\nExample: ` \"volterra-secret-policy\"`","title":"name","x-displayname":"Name","x-ves-example":"volterra-secret-policy"},"namespace":{"type":"string","description":" Namespace of the policy\n\nExample: ` \"system\"`","title":"namespace","x-displayname":"Namespace","x-ves-example":"system"},"policy_id":{"type":"string","description":" PolicyID for the policy. PolicyID is an integer ID which uniquely identifies the policy in given tenant.\n\nExample: ` \"101\"`\n\nValidation Rules:\n  ves.io.schema.rules.uint64.gte: 0\n  ves.io.schema.rules.uint64.lte: 2147483647\n","title":"policy_id","format":"uint64","x-displayname":"PolicyID","x-ves-example":"101","x-ves-validation-rules":{"ves.io.schema.rules.uint64.gte":"0","ves.io.schema.rules.uint64.lte":"2147483647"}},"policy_info":{"$ref":"#/components/schemas/secret_managementPolicyInfoType"},"tenant":{"type":"string","description":" Tenant for the policy\n\nExample: ` \"ves-io\"`","title":"tenant","x-displayname":"Tenant","x-ves-example":"ves-io"}}},"secret_managementPolicyInfoType":{"type":"object","description":"policy_information contains the shape and specifications of the secret policy.","title":"PolicyInfoType","x-displayname":"Policy Information","x-ves-proto-message":"ves.io.schema.secret_management.PolicyInfoType","properties":{"algo":{"$ref":"#/components/schemas/policyRuleCombiningAlgorithm"},"rules":{"type":"array","description":" A list of references to secret_policy_rule objects.\n The order of evaluation of the rules depends on the rule combining algorithm.","title":"Rules","items":{"$ref":"#/components/schemas/schemasecret_policy_ruleGlobalSpecType"},"x-displayname":"Secret Policy Rules"}}}}}}