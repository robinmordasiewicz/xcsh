{"openapi":"3.0.0","info":{"title":"F5 Distributed Cloud Services API for ves.io.schema.billing.plan_transition","description":"Package plan transition is responsible for storing and managing requests to move from one\nbilling plan to another.","version":""},"paths":{"/no_auth/namespaces/system/billing/plan_transition":{"get":{"summary":"GetPlanTransition","description":"API to get plan transition details by a plan transition request uid returned from InitiatePlanTransition.\nFor now this one returns only current State","operationId":"ves.io.schema.billing.plan_transition.CustomAPI.GetPlanTransition","responses":{"200":{"description":"A successful response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/plan_transitionGetPlanTransitionRsp"}}}},"401":{"description":"Returned when operation is not authorized","content":{"application/json":{"schema":{"format":"string"}}}},"403":{"description":"Returned when there is no permission to access resource","content":{"application/json":{"schema":{"format":"string"}}}},"404":{"description":"Returned when resource is not found","content":{"application/json":{"schema":{"format":"string"}}}},"409":{"description":"Returned when operation on resource is conflicting with current value","content":{"application/json":{"schema":{"format":"string"}}}},"429":{"description":"Returned when operation has been rejected as it is happening too frequently","content":{"application/json":{"schema":{"format":"string"}}}},"500":{"description":"Returned when server encountered an error in processing API","content":{"application/json":{"schema":{"format":"string"}}}},"503":{"description":"Returned when service is unavailable temporarily","content":{"application/json":{"schema":{"format":"string"}}}},"504":{"description":"Returned when server timed out processing request","content":{"application/json":{"schema":{"format":"string"}}}}},"parameters":[{"name":"id","description":"x-example: \"dec2417d-adb1-4fcc-8dcd-529b1d31a652\"\nId of the plan transition request","in":"query","required":false,"x-displayname":"id","schema":{"type":"string"}}],"externalDocs":{"description":"Examples of this operation","url":"https://docs.cloud.f5.com/docs-v2/platform/reference/api-ref/ves-io-schema-billing-plan_transition-customapi-getplantransition"},"x-ves-proto-rpc":"ves.io.schema.billing.plan_transition.CustomAPI.GetPlanTransition"},"x-displayname":"Plan transition CustomAPI","x-ves-proto-service":"ves.io.schema.billing.plan_transition.CustomAPI","x-ves-proto-service-type":"CUSTOM_PUBLIC"},"/api/web/namespaces/{namespace}/billing/plan_transition":{"post":{"summary":"InitiatePlanTransition","description":"API to create a plan transition request in db.","operationId":"ves.io.schema.billing.plan_transition.CustomAPI.InitiatePlanTransition","responses":{"200":{"description":"A successful response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/plan_transitionInitiatePlanTransitionRsp"}}}},"401":{"description":"Returned when operation is not authorized","content":{"application/json":{"schema":{"format":"string"}}}},"403":{"description":"Returned when there is no permission to access resource","content":{"application/json":{"schema":{"format":"string"}}}},"404":{"description":"Returned when resource is not found","content":{"application/json":{"schema":{"format":"string"}}}},"409":{"description":"Returned when operation on resource is conflicting with current value","content":{"application/json":{"schema":{"format":"string"}}}},"429":{"description":"Returned when operation has been rejected as it is happening too frequently","content":{"application/json":{"schema":{"format":"string"}}}},"500":{"description":"Returned when server encountered an error in processing API","content":{"application/json":{"schema":{"format":"string"}}}},"503":{"description":"Returned when service is unavailable temporarily","content":{"application/json":{"schema":{"format":"string"}}}},"504":{"description":"Returned when server timed out processing request","content":{"application/json":{"schema":{"format":"string"}}}}},"parameters":[{"name":"namespace","description":"Namespace\n\nx-example: \"system\"\nThis namespace is not used, all requests are stored under system namespace.","in":"path","required":true,"x-displayname":"Namespace","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/plan_transitionInitiatePlanTransitionReq"}}},"required":true},"externalDocs":{"description":"Examples of this operation","url":"https://docs.cloud.f5.com/docs-v2/platform/reference/api-ref/ves-io-schema-billing-plan_transition-customapi-initiateplantransition"},"x-ves-proto-rpc":"ves.io.schema.billing.plan_transition.CustomAPI.InitiatePlanTransition"},"x-displayname":"Plan transition CustomAPI","x-ves-proto-service":"ves.io.schema.billing.plan_transition.CustomAPI","x-ves-proto-service-type":"CUSTOM_PUBLIC"}},"x-displayname":"Plan transition CustomAPI","x-ves-proto-package":"ves.io.schema.billing.plan_transition","components":{"schemas":{"contactContactType":{"type":"string","description":"Determines the contact type\n\nIndicates snail mail address (used for correspondence)\nIndicates billing address (this address will appear on invoices)\nIndicates contact used for a payment method (this address is used when charging a payment method)","title":"Contact Type","enum":["MAILING","BILLING","PAYMENT"],"default":"MAILING","x-displayname":"Contact Type","x-ves-proto-enum":"ves.io.schema.contact.ContactType"},"plan_transitionGetPlanTransitionRsp":{"type":"object","description":"Request body of GetPlanTransition custom api","title":"GetPlanTransitionRsp","x-displayname":"GetPlanTransitionRsp","x-ves-proto-message":"ves.io.schema.billing.plan_transition.GetPlanTransitionRsp","properties":{"state":{"$ref":"#/components/schemas/plan_transitionState"}}},"plan_transitionInitiatePlanTransitionReq":{"type":"object","description":"Request body of InitiatePlanTransition custom api","title":"InitiatePlanTransitionReq","x-displayname":"InitiatePlanTransitionReq","x-ves-proto-message":"ves.io.schema.billing.plan_transition.InitiatePlanTransitionReq","properties":{"namespace":{"type":"string","description":" This namespace is not used, all requests are stored under system namespace.\n\nExample: ` \"system\"`","title":"Namespace","x-displayname":"Namespace","x-ves-example":"system"},"new_plan":{"type":"string","description":" New plan template name tenant want to move to\n\nExample: ` \"plan-1\"`","title":"New plan","x-displayname":"New Plan","x-ves-example":"plan-1"},"payload":{"$ref":"#/components/schemas/plan_transitionTransitionPayload"}}},"plan_transitionInitiatePlanTransitionRsp":{"type":"object","description":"Response body of InitiatePlanTransition custom api","title":"InitiatePlanTransitionRsp","x-displayname":"InitiatePlanTransitionRsp","x-ves-proto-message":"ves.io.schema.billing.plan_transition.InitiatePlanTransitionRsp","properties":{"id":{"type":"string","description":" Id of the newly created plan transition request\n\nExample: ` \"dec2417d-adb1-4fcc-8dcd-529b1d31a652\"`","title":"id","x-displayname":"id","x-ves-example":"dec2417d-adb1-4fcc-8dcd-529b1d31a652"},"requires_manual_approval":{"type":"boolean","description":" flag to specify whether the request requires manual approval.","title":"requires_manual_approval","format":"boolean","x-displayname":"requires_manual_approval"}}},"plan_transitionState":{"type":"string","description":"State of the plan transition FSM\n\n - STATE_UNSPECIFIED: Zero value for this state. Should be considered as an invalid state. User has to always explicitly\nspecify which other state should be.\n - STATE_CREATING: Initial state after plan transition object creation.\n - STATE_FAILED: Some step(-s) failed during plan transition execution.\n - STATE_FINISHED: All steps were successfully done during plan transition execution.\n - STATE_WAITING_FOR_APPROVAL: Request is awaiting for manual approval by SRE","title":"State","enum":["STATE_UNSPECIFIED","STATE_CREATING","STATE_FAILED","STATE_FINISHED","STATE_WAITING_FOR_APPROVAL"],"default":"STATE_UNSPECIFIED","x-displayname":"State","x-ves-proto-enum":"ves.io.schema.billing.plan_transition.State"},"plan_transitionTransitionPayload":{"type":"object","description":"Payload which is required to execute transition from the current tenant's plan to a given new_plan","title":"TransitionPayload","x-displayname":"TransitionPayload","x-ves-proto-message":"ves.io.schema.billing.plan_transition.TransitionPayload","properties":{"billing_address":{"$ref":"#/components/schemas/schemacontactGlobalSpecType"},"billing_provider_account_id":{"type":"string","description":" Id of the billing provider account created to verify the billing info provided with this object.\n The id is then used to ensure no more duplicate billing account is created.\n Note: this is set by the backend during the creation of plan_transition object. Anything passed from ui will be ignored\n\nExample: ` \"f68bb6f4-b279-403b-b5e8-59dd6fcf73f0\"`","title":"billing_provider_account_id","x-displayname":"Billing provider account id","x-ves-example":"f68bb6f4-b279-403b-b5e8-59dd6fcf73f0"},"create_support_ticket":{"type":"boolean","description":" if set to true, a support ticket will be created to provide the plan transition request.","title":"create_support_ticket","format":"boolean","x-displayname":"Create Support Ticket"},"deletion_feedback":{"type":"string","description":" Feedback from the customer related to reason of account deletion.\n\nExample: ` \"customer given feedback\"`","title":"Feedback","x-displayname":"Feedback","x-ves-example":"customer given feedback"},"deletion_reason":{"$ref":"#/components/schemas/tenantDeletionReason"},"domain":{"type":"string","description":" Domain for enterprise tenants\n\nExample: ` \"domain1\"`","title":"payment_provider_token","x-displayname":"Payment Provider Token","x-ves-example":"domain1"},"payment_address":{"$ref":"#/components/schemas/schemacontactGlobalSpecType"},"payment_provider_token":{"type":"string","description":" payment provider token (for credit card details)\n\nExample: ` \"tok-123456\"`","title":"payment_provider_token","x-displayname":"Payment Provider Token","x-ves-example":"tok-123456"},"subscribe_addon_services":{"type":"array","description":" List of addon services that needs to be subscribed/enabled part of this plan transition\n\nExample: ` \"['service1','service2']\"`","title":"subscribe_addon_services","items":{"type":"string"},"x-displayname":"Subscribe Addon Services","x-ves-example":"['service1','service2']"},"support_ticket_info":{"type":"string","description":" Additional information user want to record part of the support ticket.\n\nExample: ` \"user comment\"`","title":"support_ticket_info","x-displayname":"Support Ticket Additional Info","x-ves-example":"user comment"},"tp_subscription_id":{"type":"string","description":" Id of the third party subscription id created.\n Note: this is set by the backend as part of the notifiers run as the plan_transition object is created.\n\nExample: ` \"e265802e-9dfa-4632-8c0b-cc2596e5599e\"`","title":"tp_subscription_id","x-displayname":"Third party subscription id","x-ves-example":"e265802e-9dfa-4632-8c0b-cc2596e5599e"},"unsubscribe_addon_services":{"type":"array","description":" List of addon services that needs to be unsubscribed/removed part of this plan transition\n\nExample: ` \"['service3','service4']\"`","title":"unsubscribe_addon_services","items":{"type":"string"},"x-displayname":"Unsubscribe Addon Services","x-ves-example":"['service3','service4']"}}},"schemacontactGlobalSpecType":{"type":"object","description":"Instance of one single contact that can be used to communicate with customers.\nDepending on contact type we use these details to send general communication (regular, physical mail) or invoices.","title":"Contact","x-displayname":"Contact","x-ves-proto-message":"ves.io.schema.contact.GlobalSpecType","properties":{"address1":{"type":"string","description":"\n\nExample: ` \"1234 Main road\"`","title":"address1","x-displayname":"Address Line 1","x-ves-example":"1234 Main road"},"address2":{"type":"string","description":"\n\nExample: ` \"P.O BOX 56\"`","title":"address2","x-displayname":"Address Line 2","x-ves-example":"P.O BOX 56"},"city":{"type":"string","description":"\n\nExample: ` \"Sunnyvale\"`","title":"city","x-displayname":"City","x-ves-example":"Sunnyvale"},"contact_type":{"$ref":"#/components/schemas/contactContactType"},"country":{"type":"string","description":"\n\nExample: ` \"US\"`","title":"country","x-displayname":"Country","x-ves-example":"US"},"county":{"type":"string","description":"\n\nExample: ` \"Santa Clara\"`","title":"county","x-displayname":"County","x-ves-example":"Santa Clara"},"phone_number":{"type":"string","description":"\n\nExample: ` \"+11234567890\"`","title":"phone_number","x-displayname":"Phone Number","x-ves-example":"+11234567890"},"state":{"type":"string","description":"\n\nExample: ` \"California\"`","title":"state","x-displayname":"State","x-ves-example":"California"},"state_code":{"type":"string","description":"\n\nExample: ` \"CA\"`","title":"state code","x-displayname":"State Code","x-ves-example":"CA"},"zip_code":{"type":"string","description":"\n\nExample: ` \"95054\"`","title":"zip_code","x-displayname":"ZIP code","x-ves-example":"95054"}}},"tenantDeletionReason":{"type":"string","description":"List of available reason for account deletion.\n\n - REASON_UNKNOWN: Unknown reason\n\nUnknown reason\n - REASON_SWITCH_TO_FREE_PLAN: Switch to free plan\n\nSwitch to free plan\n - REASON_NO_LONGER_NEEDED: No longer needed\n\nNo longer needed\n - REASON_NOT_JUSTIFY_COSTS: Too expensive\n\nToo expensive\n - REASON_DIFFICULT_TO_USE: Difficult to use\n\nDifficult to use","title":"DeletionReason","enum":["REASON_UNKNOWN","REASON_SWITCH_TO_FREE_PLAN","REASON_NO_LONGER_NEEDED","REASON_NOT_JUSTIFY_COSTS","REASON_DIFFICULT_TO_USE"],"default":"REASON_UNKNOWN","x-displayname":"DeletionReason","x-ves-proto-enum":"ves.io.schema.tenant.DeletionReason"}}}}
