{"openapi":"3.0.0","info":{"title":"F5 Distributed Cloud Services API for ves.io.schema.operate.flow","description":"Proto definitions for VER flows","version":""},"paths":{"/api/operate/namespaces/{namespace}/sites/{site}/ver/matching_flows":{"post":{"summary":"Show Matching Flows","description":"Show VER flows matching the request","operationId":"ves.io.schema.operate.flow.CustomPublicAPI.ShowMatchingFlows","responses":{"200":{"description":"A successful response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/flowFlows"}}}},"401":{"description":"Returned when operation is not authorized","content":{"application/json":{"schema":{"format":"string"}}}},"403":{"description":"Returned when there is no permission to access resource","content":{"application/json":{"schema":{"format":"string"}}}},"404":{"description":"Returned when resource is not found","content":{"application/json":{"schema":{"format":"string"}}}},"409":{"description":"Returned when operation on resource is conflicting with current value","content":{"application/json":{"schema":{"format":"string"}}}},"429":{"description":"Returned when operation has been rejected as it is happening too frequently","content":{"application/json":{"schema":{"format":"string"}}}},"500":{"description":"Returned when server encountered an error in processing API","content":{"application/json":{"schema":{"format":"string"}}}},"503":{"description":"Returned when service is unavailable temporarily","content":{"application/json":{"schema":{"format":"string"}}}},"504":{"description":"Returned when server timed out processing request","content":{"application/json":{"schema":{"format":"string"}}}}},"parameters":[{"name":"namespace","description":"Namespace\n\nx-example: \"system\"\nNamespace for which the request is sent (system)","in":"path","required":true,"x-displayname":"Namespace","schema":{"type":"string"}},{"name":"site","description":"Site Name\n\nx-example: \"value\"\nName of the site from which flows are requested","in":"path","required":true,"x-displayname":"Site Name","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/flowFlowMatchRequest"}}},"required":true},"x-ves-proto-rpc":"ves.io.schema.operate.flow.CustomPublicAPI.ShowMatchingFlows"},"x-displayname":"Flow Info","x-ves-proto-service":"ves.io.schema.operate.flow.CustomPublicAPI","x-ves-proto-service-type":"CUSTOM_PUBLIC"}},"x-displayname":"Flow Info","x-ves-proto-package":"ves.io.schema.operate.flow","components":{"schemas":{"flowFlowInfo":{"type":"object","description":"Flow information","title":"Flow Information","x-displayname":"Flow Information","x-ves-proto-message":"ves.io.schema.operate.flow.FlowInfo","properties":{"ace_id":{"type":"integer","description":" ACE identifier\n\nExample: ` \"10\"`","title":"Ace","format":"int64","x-displayname":"Ace","x-ves-example":"10"},"acl_id":{"type":"integer","description":" ACL identifier\n\nExample: ` \"10\"`","title":"Acl","format":"int64","x-displayname":"Acl","x-ves-example":"10"},"action":{"type":"string","description":" Action on the flow traffic\n\nExample: ` \"Forward\"`","title":"Flow Action","x-displayname":"Flow Action","x-ves-example":"Forward"},"byte_count":{"type":"string","description":" Total byte count of the packets that hit the flow\n\nExample: ` \"1000\"`","title":"Byte Count","format":"uint64","x-displayname":"Bytes","x-ves-example":"1000"},"dest_nh_id":{"type":"integer","description":" Destination nexthop id\n\nExample: ` \"20\"`","title":"Destination Nexthop","format":"int64","x-displayname":"Destination Nexthop","x-ves-example":"20"},"dest_vrf_id":{"type":"integer","description":" Destination VRF id, when VRF translation is involved\n\nExample: ` \"20\"`","title":"Dest VRF","format":"int64","x-displayname":"Dest VRF","x-ves-example":"20"},"drop_reason":{"type":"string","description":" Reason for flow drop, when action is \"Drop\"\n\nExample: ` \"No source route\"`","title":"Drop Reason","x-displayname":"Drop Reason","x-ves-example":"No source route"},"ecmp_nh_id":{"type":"array","description":" List of nexthop identifiers, when ecmp is applicable\n\nExample: ` \"20 30 40\"`","title":"Ecmp Nexthop","items":{"type":"integer","format":"int64"},"x-displayname":"Ecmp Nexthop","x-ves-example":"20 30 40"},"external_service_nh_id":{"type":"integer","description":" Nexthop for the External Service\n\nExample: ` \"20\"`","title":"External Service Nexthop","format":"int64","x-displayname":"External Service Nexthop","x-ves-example":"20"},"flags":{"type":"string","description":" Flow TCP flags\n\nExample: ` \"SYN; ESTABLISHED\";`","title":"Flags","x-displayname":"Flags"},"flow_index":{"type":"integer","description":" Index of the forward flow\n\nExample: ` \"44444\"`","title":"Flow Index","format":"int64","x-displayname":"Flow Index","x-ves-example":"44444"},"forward_flow":{"$ref":"#/components/schemas/flowFlowKey"},"forward_label":{"type":"integer","description":" Forward label","title":"Forward Label","format":"int32","x-displayname":"Forward Label"},"fr_ttl":{"type":"integer","description":" TTL value\n\nExample: ` \"64\"`","title":"Ttl","format":"int64","x-displayname":"TTL","x-ves-example":"64"},"pkt_count":{"type":"string","description":" Number of packets that hit the flow\n\nExample: ` \"100\"`","title":"Packet Count","format":"uint64","x-displayname":"Packets","x-ves-example":"100"},"qos_id":{"type":"integer","description":" QoS identifier\n\nExample: ` \"20\"`","title":"Qos","format":"int64","x-displayname":"Qos","x-ves-example":"20"},"reverse_flow_index":{"type":"integer","description":" Index of the reverse flow\n\nExample: ` \"55555\"`","title":"Reverse Flow Index","format":"int64","x-displayname":"Reverse Flow Index","x-ves-example":"55555"},"src_nh_id":{"type":"integer","description":" Source nexthop id\n\nExample: ` \"20\"`","title":"Source Nexthop","format":"int64","x-displayname":"Source Nexthop","x-ves-example":"20"}}},"flowFlowKey":{"type":"object","description":"Flow Key","title":"Flow Key","x-displayname":"Flow Key","x-ves-proto-message":"ves.io.schema.operate.flow.FlowKey","properties":{"dest":{"type":"string","description":" Destination Address of the flow\n\nExample: ` \"192.168.1.25\"`","title":"Destination Address","x-displayname":"Destination Address","x-ves-example":"192.168.1.25"},"dest_port":{"type":"integer","description":" Destination port of the flow\n\nExample: ` \"22225\"`","title":"Destination Port","format":"int32","x-displayname":"Destination Port","x-ves-example":"22225"},"intf_id":{"type":"integer","description":" Interface index\n\nExample: ` \"20\"`","title":"Interface Index","format":"int64","x-displayname":"Interface Index","x-ves-example":"20"},"proto":{"type":"integer","description":" Protocol of the flow\n\nExample: ` \"6\"`","title":"Protocol","format":"int64","x-displayname":"Protocol","x-ves-example":"6"},"src":{"type":"string","description":" Source Address of the flow\n\nExample: ` \"192.168.1.25\"`","title":"Source Address","x-displayname":"Source Address","x-ves-example":"192.168.1.25"},"src_port":{"type":"integer","description":" Source port of the flow\n\nExample: ` \"22225\"`","title":"Source Port","format":"int64","x-displayname":"Source Port","x-ves-example":"22225"},"vrf_id":{"type":"integer","description":" Vrf index\n\nExample: ` \"10\"`","title":"Vrf","format":"int64","x-displayname":"Vrf","x-ves-example":"10"}}},"flowFlowMatchRequest":{"type":"object","description":"Request to get list of VER flows matching the request","title":"Flow Match Request","x-displayname":"Flow Match Request","x-ves-oneof-field-interface_or_network":"[\"external_service\",\"intf\",\"pod\",\"vn\",\"vn_type\"]","x-ves-proto-message":"ves.io.schema.operate.flow.FlowMatchRequest","properties":{"dest":{"type":"string","description":" Destination Address of the flow (optional)\n\nExample: ` \"192.168.1.25\"`","title":"Destination Address","x-displayname":"Destination Address","x-ves-example":"192.168.1.25"},"dest_port":{"type":"integer","description":" Destination port of the flow (optional)\n\nExample: ` \"22225\"`\n\nValidation Rules:\n  ves.io.schema.rules.uint32.lte: 65535\n","title":"Destination Port","format":"int64","x-displayname":"Destination Port","x-ves-example":"22225","x-ves-validation-rules":{"ves.io.schema.rules.uint32.lte":"65535"}},"external_service":{"$ref":"#/components/schemas/schemaEmpty"},"intf":{"type":"string","description":"Exclusive with [external_service pod vn vn_type]\n Name of the Interface on which flows are to be matched\n\nExample: ` \"eth0\"`","title":"Interface","x-displayname":"Interface","x-ves-example":"eth0"},"namespace":{"type":"string","description":" Namespace for which the request is sent (system)\n\nExample: ` \"system\"`","title":"Namespace","x-displayname":"Namespace","x-ves-example":"system"},"node":{"type":"string","description":" Name of the node from which flows are requested\n\nExample: ` \"master-0\"`\n\nValidation Rules:\n  ves.io.schema.rules.string.max_len: 64\n  ves.io.schema.rules.string.min_len: 1\n","title":"Node Name","minLength":1,"maxLength":64,"x-displayname":"Node Name","x-ves-example":"master-0","x-ves-validation-rules":{"ves.io.schema.rules.string.max_len":"64","ves.io.schema.rules.string.min_len":"1"}},"pod":{"type":"string","description":"Exclusive with [external_service intf vn vn_type]\n Name of the pod for which flows are to be matched\n\nExample: ` \"pod-5444dcd747-868hq\"`","title":"Pod Name","x-displayname":"Pod Name","x-ves-example":"pod-5444dcd747-868hq"},"proto":{"type":"integer","description":" Protocol of the flow (optional)\n\nExample: ` \"6\"`\n\nValidation Rules:\n  ves.io.schema.rules.uint32.lte: 255\n","title":"Protocol","format":"int64","x-displayname":"Protocol","x-ves-example":"6","x-ves-validation-rules":{"ves.io.schema.rules.uint32.lte":"255"}},"seconds":{"type":"integer","description":" Number of seconds for which flows are requested.\n A value of 100 returns flows created in the past 100 seconds,\n with a maximum of 1024 flows. A value of 0 returns all matching\n flows upto a maximum of 1024.\n\nExample: ` \"100\"`","title":"Seconds","format":"int64","x-displayname":"Seconds","x-ves-example":"100"},"site":{"type":"string","description":" Name of the site from which flows are requested\n\nExample: ` \"value\"`","title":"Site Name","x-displayname":"Site Name","x-ves-example":"value"},"src":{"type":"string","description":" Source Address of the flow (optional)\n\nExample: ` \"192.168.1.25\"`","title":"Source Address","x-displayname":"Source Address","x-ves-example":"192.168.1.25"},"src_port":{"type":"integer","description":" Source port of the flow (optional)\n\nExample: ` \"22225\"`\n\nValidation Rules:\n  ves.io.schema.rules.uint32.lte: 65535\n","title":"Source Port","format":"int64","x-displayname":"Source Port","x-ves-example":"22225","x-ves-validation-rules":{"ves.io.schema.rules.uint32.lte":"65535"}},"vn":{"type":"string","description":"Exclusive with [external_service intf pod vn_type]\n Name of Virtual Network on which flows are matched\n\nExample: ` \"site-local-outside-vn\"`","title":"Virtual Network","x-displayname":"Virtual Network","x-ves-example":"site-local-outside-vn"},"vn_type":{"$ref":"#/components/schemas/schemaVirtualNetworkType"}}},"flowFlows":{"type":"object","description":"Matching flow list from VER","title":"Flows","x-displayname":"Flows","x-ves-proto-message":"ves.io.schema.operate.flow.Flows","properties":{"flow":{"type":"array","description":" Flow information","title":"Flow Info","items":{"$ref":"#/components/schemas/flowFlowInfo"},"x-displayname":"Flow Info"}}},"schemaEmpty":{"type":"object","description":"This can be used for messages where no values are needed","title":"Empty","x-displayname":"Empty","x-ves-proto-message":"ves.io.schema.Empty"},"schemaVirtualNetworkType":{"type":"string","description":"Different types of virtual networks understood by the system\n\nVirtual-network of type VIRTUAL_NETWORK_SITE_LOCAL provides connectivity to public (outside) network.\nThis is an insecure network and is connected to public internet via NAT Gateways/firwalls\nVirtual-network of this type is local to every site. Two virtual networks of this type on different\nsites are neither related nor connected.\n\nConstraints:\nThere can be atmost one virtual network of this type in a given site.\nThis network type is supported on CE sites. This network is created automatically and present on all sites\nVirtual-network of type VIRTUAL_NETWORK_SITE_LOCAL_INSIDE is a private network inside site.\nIt is a secure network and is not connected to public network.\nVirtual-network of this type is local to every site. Two virtual networks of this type on different\nsites are neither related nor connected.\n\nConstraints:\nThere can be atmost one virtual network of this type in a given site.\nThis network type is supported on CE sites. This network is created during provisioning of site\nUser defined per-site virtual network. Scope of this virtual network is limited to the site.\nThis is not yet supported\nVirtual-network of type VIRTUAL_NETWORK_PUBLIC directly conects to the public internet.\nVirtual-network of this type is local to every site. Two virtual networks of this type on different sites are neither related nor connected.\n\nConstraints:\nThere can be atmost one virtual network of this type in a given site.\nThis network type is supported on RE sites only\nIt is an internally created by the system. They must not be created by user\nVirtual Neworks with global scope across different sites in F5XC domain.\nAn example global virtual-network called \"AIN Network\" is created for every tenant.\nfor volterra fabric\n\nConstraints:\nIt is currently only supported as internally created by the system.\nvK8s service network for a given tenant. Used to advertise a virtual host only to vk8s pods for that tenant\nConstraints:\nIt is an internally created by the system. Must not be created by user\nVER internal network for the site. It can only be used for virtual hosts with SMA_PROXY type proxy\nConstraints:\nIt is an internally created by the system. Must not be created by user\nVirtual-network of type VIRTUAL_NETWORK_SITE_LOCAL_INSIDE_OUTSIDE represents both\nVIRTUAL_NETWORK_SITE_LOCAL and VIRTUAL_NETWORK_SITE_LOCAL_INSIDE\n\nConstraints:\nThis network type is only meaningful in an advertise policy\nWhen virtual-network of type VIRTUAL_NETWORK_IP_AUTO is selected for\nan endpoint, VER will try to determine the network based on the provided\nIP address\n\nConstraints:\nThis network type is only meaningful in an endpoint\n\nVoltADN Private Network is used on volterra RE(s) to connect to customer private networks\nThis network is created by opening a support ticket\n\nThis network is per site srv6 network\nVER IP Fabric network for the site.\nThis Virtual network type is used for exposing virtual host on IP Fabric network on the VER site or\nfor endpoint in IP Fabric network\nConstraints:\nIt is an internally created by the system. Must not be created by user\nNetwork internally created for a segment\nConstraints:\nIt is an internally created by the system. Must not be created by user","title":"VirtualNetworkType","enum":["VIRTUAL_NETWORK_SITE_LOCAL","VIRTUAL_NETWORK_SITE_LOCAL_INSIDE","VIRTUAL_NETWORK_PER_SITE","VIRTUAL_NETWORK_PUBLIC","VIRTUAL_NETWORK_GLOBAL","VIRTUAL_NETWORK_SITE_SERVICE","VIRTUAL_NETWORK_VER_INTERNAL","VIRTUAL_NETWORK_SITE_LOCAL_INSIDE_OUTSIDE","VIRTUAL_NETWORK_IP_AUTO","VIRTUAL_NETWORK_VOLTADN_PRIVATE_NETWORK","VIRTUAL_NETWORK_SRV6_NETWORK","VIRTUAL_NETWORK_IP_FABRIC","VIRTUAL_NETWORK_SEGMENT"],"default":"VIRTUAL_NETWORK_SITE_LOCAL","x-displayname":"Virtual Network Type","x-ves-proto-enum":"ves.io.schema.VirtualNetworkType"}}}}
